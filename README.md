# Federvise

ä¸€ä¸ªå•ç”¨æˆ· ActivityPub åšå®¢ç³»ç»Ÿã€‚ç”¨ Markdown å†™ä½œï¼Œå‘å¸ƒåˆ° Fediverse è”é‚¦å®‡å®™ã€‚

## ç‰¹æ€§

- **åˆå§‹åŒ–å‘å¯¼** - é¦–æ¬¡éƒ¨ç½²æ—¶é€šè¿‡ç½‘é¡µå®Œæˆé…ç½®ï¼Œæ— éœ€æ‰‹åŠ¨ç¼–è¾‘é…ç½®æ–‡ä»¶
- **åŒå› ç´ è®¤è¯** - ä½¿ç”¨ TOTP éªŒè¯ç ç™»å½•ï¼Œæ”¯æŒ Google Authenticator ç­‰åº”ç”¨
- **å¿«æ·å‘å¸ƒ** - é¦–é¡µç›´æ¥å‘å¸ƒå†…å®¹ï¼Œç±»ä¼¼ Twitter/Mastodon ä½“éªŒ
- **äº’åŠ¨æ˜¾ç¤º** - è‡ªåŠ¨æ”¶å–å¹¶æ˜¾ç¤ºæ¥è‡ª Fediverse çš„è¯„è®ºã€ç‚¹èµã€è½¬å‘
- **Markdown å†™ä½œ** - æ”¯æŒ YAML frontmatter çš„ Markdown æ–‡ä»¶
- **ActivityPub è”é‚¦** - å…¼å®¹ Mastodonã€Misskeyã€Pleroma ç­‰
- **REST API** - æ”¯æŒç¨‹åºåŒ–è®¿é—®
- **RSS/JSON Feed** - ä¼ ç»Ÿè®¢é˜…æ–¹å¼
- **æš—è‰²æ¨¡å¼** - è·Ÿéšç³»ç»Ÿåå¥½è‡ªåŠ¨åˆ‡æ¢

## å¿«é€Ÿå¼€å§‹

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/jantian3n/federvise.git
cd federvise

# å®‰è£…ä¾èµ–
npm install

# æ„å»ºé¡¹ç›®
npm run build

# å¯åŠ¨æœåŠ¡
npm start

# è®¿é—® http://localhost:3000/setup å®Œæˆåˆå§‹åŒ–
```

## åˆå§‹åŒ–å‘å¯¼

é¦–æ¬¡è®¿é—®æ—¶ä¼šè‡ªåŠ¨è·³è½¬åˆ°åˆå§‹åŒ–å‘å¯¼ï¼š

1. **ç«™ç‚¹ä¿¡æ¯** - è®¾ç½®åŸŸåã€ç”¨æˆ·åã€æ˜¾ç¤ºåç§°ã€ç®€ä»‹
2. **è®¾ç½®å¯†ç ** - åˆ›å»ºç®¡ç†å‘˜å¯†ç ï¼ˆè‡³å°‘ 8 ä½ï¼‰
3. **å¯ç”¨ 2FA** - æ‰«æäºŒç»´ç ï¼Œç»‘å®š TOTP éªŒè¯å™¨

å®Œæˆåè‡ªåŠ¨ç™»å½•ï¼Œé…ç½®ä¿å­˜åœ¨æ•°æ®åº“ä¸­ã€‚

## å†™ä½œä¸å‘å¸ƒ

### æ–¹å¼ä¸€ï¼šç½‘é¡µå¿«æ·å‘å¸ƒ

ç™»å½•åé¦–é¡µé¡¶éƒ¨ä¼šæ˜¾ç¤ºå‘å¸ƒæ¡†ï¼š

- **åªå¡«å†…å®¹** â†’ åˆ›å»ºç¬”è®°ï¼ˆç±»ä¼¼æ¨æ–‡ï¼‰
- **å¡«å†™æ ‡é¢˜ + å†…å®¹** â†’ åˆ›å»ºæ–‡ç« 

å‘å¸ƒåè‡ªåŠ¨æ¨é€åˆ°æ‰€æœ‰å…³æ³¨è€…ã€‚

### æ–¹å¼äºŒï¼šMarkdown æ–‡ä»¶

åœ¨ `content/` ç›®å½•åˆ›å»º Markdown æ–‡ä»¶ï¼š

```markdown
---
title: æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« 
date: 2026-01-02
tags: [åšå®¢, ActivityPub]
---

è¿™é‡Œæ˜¯æ­£æ–‡å†…å®¹ã€‚æ”¯æŒ **ç²—ä½“**ã€*æ–œä½“*ã€`ä»£ç ` ç­‰æ ¼å¼ã€‚
```

ç„¶åé€šè¿‡ç®¡ç†åå°æˆ–å‘½ä»¤è¡Œå‘å¸ƒï¼š

```bash
# æŸ¥çœ‹æ‰€æœ‰æ–‡ç« 
npm run publish

# å‘å¸ƒæŒ‡å®šæ–‡ç« 
npm run publish hello-world

# å‘å¸ƒæ‰€æœ‰æœªå‘å¸ƒçš„æ–‡ç« 
npm run publish --all
```

### æ–¹å¼ä¸‰ï¼šREST API

```bash
# åˆ›å»ºå¹¶å‘å¸ƒæ–‡ç« 
curl -X POST -H "Authorization: Bearer ä½ çš„å¯†ç " \
  -H "Content-Type: application/json" \
  -d '{"slug": "my-post", "content": "---\ntitle: æ ‡é¢˜\ndate: 2026-01-03\n---\n\nå†…å®¹", "publish": true}' \
  https://ä½ çš„åŸŸå/api/posts

# å¿«æ·å‘å¸ƒç¬”è®°
curl -X POST -H "Authorization: Bearer ä½ çš„å¯†ç " \
  -H "Content-Type: application/json" \
  -d '{"content": "è¿™æ˜¯ä¸€æ¡å¿«æ·ç¬”è®°"}' \
  https://ä½ çš„åŸŸå/api/notes
```

## äº’åŠ¨åŠŸèƒ½

å½“ Fediverse ç”¨æˆ·ä¸ä½ çš„å¸–å­äº’åŠ¨æ—¶ï¼š

| äº’åŠ¨ç±»å‹ | æ˜¾ç¤ºæ•ˆæœ |
|---------|---------|
| è¯„è®º/å›å¤ | æ˜¾ç¤ºè¯„è®ºè€…å¤´åƒã€ç”¨æˆ·åã€å†…å®¹ |
| ç‚¹èµ | æ˜¾ç¤ºç‚¹èµè€…å¤´åƒåˆ—è¡¨ |
| è½¬å‘/Boost | æ˜¾ç¤ºè½¬å‘è€…å¤´åƒåˆ—è¡¨ |

é¦–é¡µæ˜¾ç¤ºäº’åŠ¨è®¡æ•°ï¼š`ğŸ’¬ 3  â¤ï¸ 5  ğŸ” 2`

æ–‡ç« è¯¦æƒ…é¡µæ˜¾ç¤ºå®Œæ•´äº’åŠ¨åˆ—è¡¨ã€‚

## å…³æ³¨æ­¤åšå®¢

åœ¨ Mastodon æˆ–å…¶ä»– Fediverse åº”ç”¨ä¸­æœç´¢ï¼š

```
@ä½ çš„ç”¨æˆ·å@ä½ çš„åŸŸå
```

ç‚¹å‡»å…³æ³¨ï¼Œæ–°æ–‡ç« ä¼šè‡ªåŠ¨å‡ºç°åœ¨æ—¶é—´çº¿ã€‚

## ç«¯ç‚¹åˆ—è¡¨

| ç«¯ç‚¹ | è¯´æ˜ |
|------|------|
| `/` | åšå®¢é¦–é¡µ |
| `/posts/:slug` | æ–‡ç« è¯¦æƒ…é¡µ |
| `/feed.xml` | RSS è®¢é˜… |
| `/feed.json` | JSON Feed |
| `/login` | ç™»å½•é¡µé¢ |
| `/admin` | ç®¡ç†åå° |
| `/api/posts` | API: æ–‡ç« åˆ—è¡¨/åˆ›å»º |
| `/api/posts/:slug/publish` | API: å‘å¸ƒæ–‡ç«  |
| `/api/notes` | API: å¿«æ·å‘å¸ƒç¬”è®° |
| `/.well-known/webfinger` | WebFinger å‘ç° |
| `/users/:username` | ActivityPub Actor |
| `/inbox` | ActivityPub æ”¶ä»¶ç®± |
| `/health` | å¥åº·æ£€æŸ¥ |

## ç”Ÿäº§éƒ¨ç½²

è¯¦è§ [DEPLOY.md](DEPLOY.md)ã€‚

åŸºæœ¬æ­¥éª¤ï¼š

```bash
# æ„å»º
npm run build

# ä½¿ç”¨ systemd ç®¡ç†æœåŠ¡
sudo cp federvise.service /etc/systemd/system/
sudo systemctl enable federvise
sudo systemctl start federvise
```

è¦æ±‚ï¼š
- Node.js 20+
- HTTPSï¼ˆActivityPub å¿…éœ€ï¼‰
- åå‘ä»£ç†ï¼ˆNginx Proxy Managerã€Caddy ç­‰ï¼‰

## æŠ€æœ¯æ ˆ

- **è¿è¡Œæ—¶**: Node.js + TypeScript
- **æ¡†æ¶**: Hono
- **æ•°æ®åº“**: SQLite (sql.js)
- **è®¤è¯**: bcrypt + TOTP (otplib)
- **åè®®**: ActivityPub / WebFinger

## è®¸å¯è¯

MIT
